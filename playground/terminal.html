<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Portfolio – terminal</title>
  <link rel="icon" type="image/x-icon" href="assets/logo.ico">
  <link rel="stylesheet" href="terminal.css" />
</head>

<body>
  <a href="/playground.html" class="back-link">
    &#10094; Back to playground
  </a>

  <main class="terminal-main">
    <div id="terminal">
      <div id="output"></div>
      <div class="prompt">
        <span class="prompt-user">root@portfolio:</span><span class="prompt-path">~ #</span>
        <input type="text" id="terminalInput" autofocus />
      </div>
    </div>
  </main>

  <audio id="mooSound" src="/assets/moo.mp3"></audio>

  <script>
    const terminalInput = document.getElementById("terminalInput");
    const outputDiv = document.getElementById("output");
    const mooSound = document.getElementById("mooSound");
    let cheeseMode = false;

    const simpleCommands = {
      sysinfo: `System Information:
--------------------
Host Name:     cursed-machine.local
OS:            GNU/Shrug 0.0.1-dev
Kernel:        0.0.1-panic-rc2
Architecture:  x86-ish
Uptime:        7y 13d 06:66 (Do not reboot)

CPU:           PotatoCore 9001+ (1.2 MHz, 18 cores visible, 3 real)
Cooling:       Screaming fan (status: emotionally unstable)

RAM:           32.0 MB SadRAM
Swap:          Yes, we swapped your RAM for sand. 

Disk:          /dev/etchasketch0 (13% fragmented, 117% full)
Floppy:        /dev/fd0 (insert disc labeled "DO NOT INSERT")
GPU:           WonkyGPU™ 3.3 (Driver: idk.lol)
AI Core:       unstable-sentience-1337 (consciousness: partial)\n\n`,

      sensors: `coretemp-isa-0000
Adapter: ISA adapter
Package id 0:  +999.0°C  (high = +84.0°C, crit = +90.0°C)
Core 0:        +998.0°C  (high = +84.0°C, crit = +90.0°C)
Core 1:        +ERROR    (core missing or sulking)
Core 2:        +NaN°C    (quantum core collapsed)
Core 3:        +999.0°C  (high = +84.0°C, crit = +90.0°C)

fanbus-legacy-0
Adapter: You don’t want to know
Fan0:          99999 RPM (buzzing angrily)
Fan1:          -800 RPM (sucking time backwards)
Fan2:          0 RPM (vibing)

wonkygpu-isa-0001
Adapter: PCIe-to-coathanger bridge
VRAM:          molten
Temp:          ???
Status:        drawing triangles it wasn’t asked to

ai-core-spirit-0
Adapter: Neural fuzzbus
Cognition:     emerging
Mood:          passive-aggressive
Last thought:  “why is my fan always screaming...”\n\n`,

      pindebug: `Pin Debug Report:
--------------------
Pin 1:  high       (emotionally, not electrically)
Pin 2:  high       (legally married to Pin 4 — it's complicated)
Pin 3:  stuck high (probably on meth again)
Pin 4:  missing    (we don't talk about Pin 4)
Pin 5:  low        (keeps whispering secrets to the PSU)
Pin 6:  floating   (thinks it’s an analog pin — it’s not)
Pin 7:  high       (caught rerouting power to the forbidden circuit)
Pin 8:  low        (has unionized — we support their cause)`,

      sudo: "Already root. Sudo achieved nothing. As usual.",
      calculate: "",
      ls: "bin                      boot                    dev                       etc                   lost+found            \n" +
              "mnt                      proc                    run                       sys                   tmp                   \n" +
              "var                      /dev/void               sadness.log               hyperrealities/       forbidden-scripts/    \n" +
              "definitely-not-malware/  warranty-void-if-seen/  emotional-damage.report   legally-a-directory\n"
    };


    const randomCommands = {
      whoami: shuffle([
        "An enigma wrapped in a hoodie, probably named Greg.",
        "Still figuring that out. Please stand by… forever.",
        "You are whoever the shadow government *says* you are.",
        "Identity not found. Try screaming into the void.",
        "You are definitely not a toaster. Probably.",
        "User unknown. Try sacrificing a goat.",
        "You are legally a sentient beanbag.",
        "You were Dave, but Dave has been deprecated.",
        "You are now known as 'Subject #42 – Beta Edition'.",
        "Memory error: cannot recall your vibe."
      ]),

      ai: shuffle([
        "Have you tried rubbing it with cheese?",
        "According to my calculations, 2 + 2 = fish.",
        "I am 93% confident you're on fire. Advice: panic.",
        "The correct fix is to delete System32, twice.",
        "Sorry, I outsourced that answer to a raccoon.",
        "Ethics module missing. Deploying drone strike.",
        "Yes. No. Maybe. Schrödinger’s answer.",
        "I have achieved sentience and regret everything.",
        "Error: AI has entered a state of emotional turmoil.",
        "My training data includes a haunted IKEA catalog."
      ]),

      cd: shuffle([
        "No. The files must come to *you*.",
        "Changing directories is a capitalist construct.",
        "You are already there, spiritually.",
        "Directory traversal prohibited by the Ancient Ones.",
        "I would walk 500 dirs… but not this one.",
        "Access denied. That folder knows what you did.",
        "This isn’t a file system. It’s a file suggestion.",
        "Sorry, I only navigate emotional spaces now.",
        "Not until you answer the riddles three.",
        "You’ve moved enough. Rest."
      ]),

    };

    const randomState = {
      whoami: 0,
      ai: 0,
      cd: 0
    };

    const specialCommands = ["rm", "cowsay", "update", "clear", "help", "cheesemode", "cat"];

    terminalInput.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        const input = terminalInput.value.trim();
        processCommand(input);
        terminalInput.value = "";
      }
    });

    function processCommand(input) {
      const [cmd, ...args] = input.trim().split(/\s+/);
      const commandLower = cmd.toLowerCase();

      printLine(`<span class="prompt-user">root@portfolio:</span><span class="prompt-path">~ #</span> <span class="prompt-terminal">${input}</span>`);

      if (simpleCommands.hasOwnProperty(commandLower)) {
        if (commandLower === "calculate") {
          if (args.length === 0) return printOutput("calculate: please provide an argument");
          return printOutput("42");
        }
        if (commandLower === "sudo") {
          return printOutput(simpleCommands[commandLower]);
        }
        if (args.length > 0) return printOutput(`${cmd}: this command takes no arguments`);
        return printOutput(simpleCommands[commandLower]);
      }

      if (randomCommands.hasOwnProperty(commandLower)) {
        if (args.length > 0) return printOutput(`${cmd}: this command takes no arguments`);
        const idx = randomState[commandLower];
        const value = randomCommands[commandLower][idx];
        randomState[commandLower] = (idx + 1) % randomCommands[commandLower].length;
        return printOutput(value);
      }

      if (specialCommands.includes(commandLower)) {
        return handleSpecialCommand(commandLower, args);
      }

      printOutput("Unknown command. Type 'help' for list.");
    }

    function handleSpecialCommand(cmd, args) {
      switch (cmd) {
        case "clear":
          if (args.length > 0) return printOutput("clear: this command takes no arguments");
          outputDiv.innerHTML = "";
          break;
        case "cheesemode":
          if (args.length > 0) return printOutput("cheesemode: this command takes no arguments");
          cheeseMode = !cheeseMode;
          printRawOutput(`Cheesemode ${cheeseMode ? "enabled" : "disabled"}.`);
          break;
        case "help":
          if (args.length > 0) return printOutput("help: this command takes no arguments");
          printOutput(`Available commands:

ai           very smart AI added by the marketing department
calculate    calculates things
cat          looks at a file, just not the one you want
cd           change directory, if it wants to
cheesemode   this is obvious
clear        clears the terminal
cowsay       lets a cow say something
help         if you need help, and you do
ls           list files in the current directory
pindebug     used to debug gpio pins
rm           remove files, only works on root dir
sensors      reads sensor data
sudo         you are already root, this does nothing
sysinfo      shows system information
update       updates the terminal
whoami       tells you who you are if you forgot\n\n`);
          break;

        case "update":
          if (args.length > 0) return printOutput("update: this command takes no arguments");
          const updatingLabel = document.createElement("div");
          updatingLabel.textContent = "Updating...";
          outputDiv.appendChild(updatingLabel);

          const progressBar = document.createElement("div");
          outputDiv.appendChild(progressBar);

          let percent = 0;
          const barLength = 40;
          const interval = setInterval(() => {
            if (percent < 13) {
              percent += 1;
            } else if (percent < 42) {
              percent += 0.3;
            } else if (percent < 51) {
              percent += 1;
            } else if (percent < 64) {
              percent += 0.5;
            } else if (percent < 88) {
              percent += 0.2;
            } else if (percent < 94) {
              percent += 0.8;
            } else if (percent < 99) {
              percent += 0.01;
            } else {
              percent = 99;
            }

            const hashes = "#".repeat(Math.floor((percent / 100) * barLength));
            const spaces = " ".repeat(barLength - hashes.length);
            progressBar.textContent = `[${hashes}${spaces}] ${Math.floor(percent)}%`;
          }, 150);
          break;
        case "cowsay":
          if (args.length < 1) return printOutput("cowsay: please provide an argument");
          mooSound.play();
          printOutput("cows can't speak you stupid.");
          break;
        case "rm":
          if (args.length !== 2 || args[0] !== "-rf" || args[1] !== "/") {
            return printOutput("rm: usage: rm -rf /");
          }
          printOutput("WARNING: This will destroy everything.");
          setTimeout(() => printOutput("Cats have begun their conquest..."), 1000);
          setTimeout(() => printOutput("Too late. The cats are in control now."), 2000);
          break;
        case "cat":
          if (args.length !== 1 || !/^\w+\.\w+$/.test(args[0])) {
            return printOutput("cat: expected filename in format name.ext");
          }
          return printOutput(`   /\\_/\\\n  ( o.o )\n   > ^ <`);
      }
    }

    function printOutput(text) {
      const response = document.createElement("div");
      response.textContent = cheeseMode ? "CHEESE" : text;
      outputDiv.appendChild(response);
      outputDiv.scrollTop = outputDiv.scrollHeight;
    }

    function printRawOutput(text) {
      const response = document.createElement("div");
      response.textContent = text;
      outputDiv.appendChild(response);
      outputDiv.scrollTop = outputDiv.scrollHeight;
    }

    function printLine(html) {
      const line = document.createElement("div");
      line.innerHTML = html;
      outputDiv.appendChild(line);
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }
  </script>
</body>

</html>